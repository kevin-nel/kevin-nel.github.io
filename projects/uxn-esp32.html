<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>uxn on esp32 for a hardware orca sequencer</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="/assets/css/oldschool.css" />
</head>
<body>
<header>
  <img src="/assets/images/pfp.png" class="logo">
  <h1>kevin's website</h1>
</header>

<nav>
  <ul>
    <li><a href="/">home</a></li>
    <li><a href="/about.html">about</a></li>
    <li><a href="/now.html">now</a></li>
    <li><a href="https://halfdeep.xyz/">music</a></li>
    <li><a href="/projects/projects.html">projects</a></li>
    <li><a href="/knowledge/knowledge.html">knowledge</a></li>
    <li><a href="/blog/completed/blog-index.html">blog</a></li>
    <li><a href="/blog/microblog/microblog-index.html">Î¼-blog</a></li>
  </ul>
</nav>
<header id="title-block-header">
<h1 class="title">uxn on esp32 for a hardware orca sequencer</h1>
</header>
<h2 id="inspiration">inspiration</h2>
<p>I have recently been quite inspired by old tracker software and the few <a href="/knowledge/music/trackers.html">hardware trackers</a> that are out now.</p>
<p>After hanging around on <a href="https://merveilles.town">merveilles</a> i discovered <a href="https://github.com/hundredrabbits/Orca-c">orca</a> and the <a href="https://100r.co/site/uxn.html">uxn virtual computer</a> (both by <a href="https://github.com/hundredrabbits">hundred rabbits</a>) and thought that it might be possible to run orca as a rom on an esp32 using uxn.</p>
<p>Orca is an esoteric programming language used to sequence midi devices and is often used in <a href="https://www.youtube.com/watch?v=4VSrjp0w3jA">livecoding (video example)</a> <a href="https://en.wikipedia.org/wiki/Live_coding">(wikipedia)</a>.</p>
<p>It is possible to build any style sequencer you can imagine even including things like randomness and <a href="https://www.youtube.com/watch?v=OHS3lN6snrE">euclidean rhythms (video explanation)</a> <a href="https://en.wikipedia.org/wiki/Euclidean_rhythm">(wikipedia)</a>. <a href="https://www.youtube.com/watch?v=nKAjx6n97IY">Tracker style sequencers have also been made with Orca</a></p>
<h2 id="resources">resources</h2>
<p>luckily there was already a well documented <a href="https://compudanzas.et/uxn_tutorial.html">uxn tutorial</a>. The screen and mouse has already been implemented but audio and keyboard are still in progress.</p>
<h2 id="hardware">hardware</h2>
<p>I already had an esp32cam dev board with an sd card slot and a 128*64 i2c oled, but not all the pins are made available on this dev board and this screen is too small for most uses in uxn and is also only black and white.</p>
<h3 id="processing">processing</h3>
<p>an esp32 dev board will be used as the main processor</p>
<h3 id="output">output</h3>
<p>A better alternative would be to use an ILI9341 based (or similiar) SPI TFT LCD since SPI TFT displays are supported through the use of the <a href="https://github.com/Bodmer/TFT_eSPI">TFT_eSPI library</a></p>
<h3 id="input">input</h3>
<p>For user input USB keyboard/MIDI could be added with a MAX3421</p>
<h2 id="software">software</h2>
<p><a href="https://github.com/max22-/uxn-esp32">eps32 uxn port</a> is a port of <a href="https://git.sr.ht/~rabbits/uxn/tree/master/item/src/uxnemu.c">uxnemu</a> to the esp32 platform.</p>
<p>UXN uses <a href="https://wiki.libsdl.org/">sdl</a> and <a href="http://portmedia.sourceforge.net/portmidi/">portmidi</a> to provide a cross platform interface (on computers) and midi device usage.</p>
<p>Unfortunately sdl and portmidi are not available for esp32 so something else will have to take it's place:</p>
<p>some other libraries that can be used to take the place of sdl and port midi:</p>
<ul>
<li><a href="https://github.com/felis/USB_Host_Shield_2.0">This arduino library</a> for the <a href="https://datasheets.maximintegrated.com/en/ds/MAX3421E.pdf">MAX3421</a> could add usb peripheral support over SPI (including MIDI and HID).</li>
</ul>
<h2 id="design">design</h2>
<h3 id="controls">controls</h3>
<h4 id="option-1">Option 1</h4>
<p>Inspired by the LARGE multifunction encoder (knob) on the polyend tracker I thought it might be useful to use a rotary encoder with push button. It moves left/right when not pressed down and up and down when the encoder is pressed.</p>
<p>a few common keys like</p>
<ul>
<li>arrow cluster</li>
<li>ctrl</li>
<li>shift</li>
<li>backspace</li>
</ul>
<p>as well as a numpad with layers so that all 36 keys needed can be pressed without the need for a full size keyboard (though the ability to plug in a full size keyboard in the future would be nice.)</p>
<h4 id="option-2">Option 2</h4>
<p>Use a PS2 keyboard or serial</p>
<h3 id="interface">interface</h3>
<p>The visual user interface on the LCD will be provided by the UXN roms</p>
<h2 id="usage">usage</h2>
<p>The idea would be to be able to use it to sequence midi devices or use as part of a modular synth (if used in conjunction with a midi to cv device)</p>
<h2 id="todo">todo</h2>
<ul>
<li>[ ] try make the oled work then get an lcd if necessary</li>
<li>[ ] my esp32 has psram so it should be fine?</li>
<li>[ ] figure out something for keyboard inputs</li>
</ul>
<h2 id="last-resort-just-use-a-pi">last resort (just use a pi)</h2>
<ul>
<li><a href="https://llllllll.co/t/diy-norns-shield/27638">diy norns</a></li>
<li><a href="https://llllllll.co/t/teletype-diy-using-grid-keyboard-at-the-same-time-no-switch/39716">diy teletype</a></li>
</ul>
<footer>
  <a rel="me" href="https://merveilles.town/@kevin"><img src="/assets/images/icons/mastodon.svg" class="icon"
      width="48px" alt="Mastodon" title="link to my mastodon profile" />Mastodon</a>

  <a href="https://webring.xxiivv.com/#random" target="_blank"><img src="/assets/images/icons/webring.svg" class="icon"
      width="48px" alt="Webring" title="link to the Merveilles webring" />Webring</a>

  <a rel="me" href="https://github.com/kevin-nel"><img src="/assets/images/icons/github.svg" class="icon" width="48px"
      alt="Github" title="link to my Github page" />Github</a>

  <a rel="me" href="https://halfdeep.bandcamp.com/releases"><img src="/assets/images/icons/bandcamp.svg" class="icon"
      width="48px" alt="Bandcamp" title="link to my music on bandcamp" />Bandcamp</a>

  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0//"><img src="/assets/images/icons/cc.svg"
      alt="Creative Commons" title="CC BY-NC-SA 4.0" class="icon" width="48">CC</a>
  <a href="/"><img src="/assets/images/pfp.png" class="icon" alt="Homw" title="link back to the homepage" />Home</a>
</footer>
</body>
</html>
